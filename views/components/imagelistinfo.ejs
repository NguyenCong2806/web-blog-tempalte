<section class="py-12 bg-white border-t border-gray-100">
  <div class="container mx-auto px-4">
    
    <div class="text-center mb-10" data-aos="fade-in">
      <h3 class="text-xl md:text-2xl font-bold text-gray-700 uppercase tracking-widest">
        Đối tác & Đơn vị Liên kết
      </h3>
      <div class="w-16 h-1 bg-teal-500 mx-auto mt-2 rounded-full"></div>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 items-center">
      
      <% if (typeof imageListInfos !== 'undefined' && imageListInfos.length > 0) { %>
        <% 
           // 1. Lọc các item có isshow = true
           // 2. Sắp xếp theo location
           const visibleItems = imageListInfos
              .filter(item => item.isshow)
              .sort((a, b) => (a.location || 999) - (b.location || 999));
        %>

        <% visibleItems.forEach(function(item) { %>
          
          <% if (item.link) { %>
            <a href="<%= item.link %>" target="_blank" class="group relative p-4 bg-gray-50 rounded-lg flex items-center justify-center h-24 md:h-28 hover:bg-white hover:shadow-lg transition-all duration-300 border border-transparent hover:border-gray-100">
          <% } else { %>
            <div class="group relative p-4 bg-gray-50 rounded-lg flex items-center justify-center h-24 md:h-28 hover:bg-white hover:shadow-md transition-all duration-300">
          <% } %>

              <img 
                src="<%= item.img || '/images/logos/placeholder.png' %>" 
                alt="<%= item.text %>" 
                class="max-w-full max-h-full object-contain opacity-60 grayscale group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500 transform group-hover:scale-110"
                loading="lazy"
                title="<%= item.text %>" 
              >

              <% if (item.text) { %>
                <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 translate-y-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20 pointer-events-none">
                  <span class="bg-gray-800 text-white text-xs py-1 px-2 rounded shadow-lg whitespace-nowrap">
                    <%= item.text %>
                  </span>
                  <div class="w-2 h-2 bg-gray-800 transform rotate-45 absolute -top-1 left-1/2 -translate-x-1/2"></div>
                </div>
              <% } %>

              <% if (item.site) { %>
                <div class="absolute top-1 right-1 w-2 h-2 rounded-full bg-teal-500" title="<%= item.site %>"></div>
              <% } %>

          <% if (item.link) { %>
            </a>
          <% } else { %>
            </div>
          <% } %>

        <% }); %>
      <% } else { %>
        <p class="col-span-full text-center text-gray-400 text-sm">Đang cập nhật danh sách đối tác...</p>
      <% } %>

    </div>
  </div>
</section>