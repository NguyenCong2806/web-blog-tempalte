<% 
    // 1. Kiểm tra dữ liệu logo
    let item = null;
    if (typeof logos !== 'undefined' && Array.isArray(logos) && logos.length > 0) {
        // Ưu tiên logo có location = 1 (Header), nếu không có lấy cái đầu tiên
        item = logos.find(l => l.location === 1) || logos[0];
    }
%>

<% if (item) { %>
    <div class="flex items-center shrink-0">
        
        <% if (item.link) { %>
            <a href="<%= item.link %>" class="block transition-opacity duration-300 hover:opacity-80" aria-label="<%= item.site || 'Trang chủ' %>">
        <% } else { %>
            <div class="block">
        <% } %>

            <img class="w-auto h-9 sm:h-10 md:h-12 lg:h-14 object-contain"
                src="<%= item.image || '/image/logo.png' %>" 
                alt="<%= item.site || 'Logo Website' %>"
                
                /* --- CSS RESPONSIVE CHUẨN --- */
                /* w-auto: Tự động điều chỉnh chiều rộng theo tỷ lệ ảnh */
                /* h-8 (32px): Mobile nhỏ */
                /* sm:h-10 (40px): Mobile lớn */
                /* md:h-12 (48px): Tablet */
                /* lg:h-14 (56px): Desktop */
                /* object-contain: Đảm bảo ảnh luôn hiển thị trọn vẹn */
                /* Attributes hỗ trợ SEO và Core Web Vitals (CLS) */
                <% if (item.width) { %> width="<%= item.width %>" <% } %>
                <% if (item.height) { %> height="<%= item.height %>" <% } %>
                
                loading="eager" 
            />

        <% if (item.link) { %>
            </a>
        <% } else { %>
            </div>
        <% } %>

    </div>
<% } else { %>
    <div class="flex items-center shrink-0">
        <a href="/" class="block">
            <img class="w-auto h-9 sm:h-10 md:h-12 lg:h-14 object-contain" src="/image/logo.png" alt="Default Logo"/>
        </a>
    </div>
<% } %>